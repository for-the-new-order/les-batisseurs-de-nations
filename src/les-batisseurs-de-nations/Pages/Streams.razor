@page "/streams"
@inject IEpisodesService EpisodesService

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="pt-7">
    <MudGrid>
        <MudItem xs="12">
            <MudPaper>
                <MudBreadcrumbs Items="_items" Separator=">"></MudBreadcrumbs>
                <MudText Typo="Typo.h1" Class="mx-4">Streams</MudText>
                <MudText Class="pa-4">
                    Liste des streams des Terres Perdues
                </MudText>
            </MudPaper>
        </MudItem>
    </MudGrid>

    <MudGrid Justify="Justify.Center">
        @if (EpisodesLoaded)
        {
            foreach (var episode in Episodes)
            {
                <MudItem md="6">
                    <StreamCard Info="episode" />
                </MudItem>
            }
        }
        else
        {
            <MudItem sm="6">
                <StreamLoadingCard />
            </MudItem>
            <MudItem sm="6">
                <StreamLoadingCard />
            </MudItem>
        }
    </MudGrid>
</MudContainer>

@code {
    bool EpisodesLoaded => Episodes != null;
    IEnumerable<EpisodeInfo> Episodes;
    protected async override Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        Episodes = await EpisodesService.AllAsync();
    }

    private List<BreadcrumbItem> _items = new List<BreadcrumbItem>
    {
        new BreadcrumbItem("Accueil", href: "/", icon: MudBlazor.Icons.Outlined.Home),
        new BreadcrumbItem("Streams", href: null, disabled: true, icon: MudBlazor.Icons.Outlined.PlayArrow),
    };
}

